<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>çƒ¤é¢ç­‹ - ç®—æ³• Â· KLEON</title><meta name="description" content="è®¡ç®—æœºç®—æ³•

https://github.com/sunnyandgood/StoreRoom
#å¿«é€Ÿæ’åº
#æ‰¾ç¬¬Kå¤§æ•°
#æ¡çŸ³å¤´
#100ç›ç¯
#çº¢é»‘æ ‘
#AVLæ ‘
#Nä¸ªæ•°å–Mä¸ª
#ä¸¤æ•°ä¹‹å’Œ
å“ˆå¸Œæ³•
åŒæŒ‡é’ˆæ³•ï¼š
https://segmentfault.com/a/11900000235524"><meta name="og:description" content="è®¡ç®—æœºç®—æ³•

https://github.com/sunnyandgood/StoreRoom
#å¿«é€Ÿæ’åº
#æ‰¾ç¬¬Kå¤§æ•°
#æ¡çŸ³å¤´
#100ç›ç¯
#çº¢é»‘æ ‘
#AVLæ ‘
#Nä¸ªæ•°å–Mä¸ª
#ä¸¤æ•°ä¹‹å’Œ
å“ˆå¸Œæ³•
åŒæŒ‡é’ˆæ³•ï¼š
https://segmentfault.com/a/11900000235524"><meta name="twitter:site" content="KLEON"><meta name="twitter:title" content="çƒ¤é¢ç­‹ - ç®—æ³•"><meta name="twitter:card" content="summary"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 6.1.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title"></a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">è‡ªè¯´è‡ªè¯</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/categories">Categories</a></li><li><a href="/tags">Tags</a></li><li><a href="/googlebe23cb0bc55fc412.html"></a></li><li><a href="/about/index.html"></a></li><li class="soc"><a href="https://github.com/kleon1024" target="_blank" rel="noopener noreferrer" aria-label="Github"><i class="fa fa-github">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2022&nbsp;<a target="_blank" href="https://blog.kleon.space" rel="noopener noreferrer">Kleon</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>çƒ¤é¢ç­‹ - ç®—æ³•</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2021-04-26</span><span class="meta-item"><i class="fa fa-folder"></i><span>&nbsp;</span><a href="/categories/é¢ç­‹/" title="é¢ç­‹" class="a-tag">é¢ç­‹</a><span>&nbsp;</span></span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/é¢ç­‹/" title="é¢ç­‹" class="a-tag">é¢ç­‹</a><span>&nbsp;</span></span></p><p class="post-abstract"><p>è®¡ç®—æœºç®—æ³•</p>
<span id="more"></span>
<p><a target="_blank" rel="noopener" href="https://github.com/sunnyandgood/StoreRoom">https://github.com/sunnyandgood/StoreRoom</a></p>
<h1><a href="#kuai-su-pai-xu" class="header-anchor">#</a><span id="kuai-su-pai-xu">å¿«é€Ÿæ’åº</span></h1>
<h1><a href="#zhao-di-k-da-shu" class="header-anchor">#</a><span id="zhao-di-k-da-shu">æ‰¾ç¬¬Kå¤§æ•°</span></h1>
<h1><a href="#jian-shi-tou" class="header-anchor">#</a><span id="jian-shi-tou">æ¡çŸ³å¤´</span></h1>
<h1><a href="#100-zhan-deng" class="header-anchor">#</a><span id="100-zhan-deng">100ç›ç¯</span></h1>
<h1><a href="#hong-hei-shu" class="header-anchor">#</a><span id="hong-hei-shu">çº¢é»‘æ ‘</span></h1>
<h1><a href="#avl-shu" class="header-anchor">#</a><span id="avl-shu">AVLæ ‘</span></h1>
<h1><a href="#n-ge-shu-qu-m-ge" class="header-anchor">#</a><span id="n-ge-shu-qu-m-ge">Nä¸ªæ•°å–Mä¸ª</span></h1>
<h1><a href="#liang-shu-zhi-he" class="header-anchor">#</a><span id="liang-shu-zhi-he">ä¸¤æ•°ä¹‹å’Œ</span></h1>
<p>å“ˆå¸Œæ³•</p>
<p>åŒæŒ‡é’ˆæ³•ï¼š<br>
<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000023552474">https://segmentfault.com/a/1190000023552474</a></p>
<ul>
<li>ä¸å¢åŠ é¢å¤–ç©ºé—´æ—‹è½¬æ–¹é˜µ</li>
<li>é€’å½’å¤§æ ‘ä¹˜æ³•</li>
<li>æ‹¿è‹¹æœå›¾è®ºï¼Œé¡ºåºé™åˆ¶</li>
<li>äºŒåˆ†æ’åº</li>
<li>strå½’å±é›†åˆ</li>
<li>æ•°å­—å¤§åºæ•°å‡å»å°åºæ•°çš„æœ€å¤§å€¼</li>
<li>Nä¸ªäººå›´åœˆæŠ¥æ•°ï¼Œæ±‚é¡ºåº</li>
<li>abcd*4=dcba</li>
<li>33.æœç´¢æ—‹è½¬æ’åºæ•°ç»„</li>
<li>dpï¼Œnä¸ªç‰©å“ï¼Œæ¯ä¸ªåŸºç¡€ä»·å€¼aiï¼Œç¬¬kä¸ªæ‹¿ä¼šå‡å»ï¼ˆk-1ï¼‰*biçš„ä»·å€¼ï¼Œè¦æ‹¿mä¸ªä½¿æ€»ä»·å€¼æœ€å¤§ï¼ˆå¡äº†ï¼Œé¢è¯•å®˜ç»™äº†æç¤ºè¿‡äº†</li>
</ul>
<p>èƒŒåŒ…å®¹é‡ä¸ºnï¼Œä»·å€¼a[i]ï¼Œç¬¬kä¸ªæ‹¿ä»·å€¼å‡(k - i) * b[i]ï¼Œç‰©å“é‡é‡ä¸º1<br>
dpä¸ºç¬¬kä¸ªæ‹¿ç‰©å“æ—¶çš„æœ€å¤§ä»·å€¼</p>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">dp := make([]int, m + 1)
for i := 0; i < len(items); i++ &#123;
  for j := m; j >= i; i-- &#123;
    dp[j] = max(dp[j], dp[j - 1] + a[i] - i * b[i])
  &#125;
&#125;
return dp[m]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>è´ªå¿ƒï¼Œnä¸ªæ€ªç‰©ï¼Œæ¯ä¸ªæ€ªç‰©æœ‰æ”»å‡»aiï¼Œå‹‡è€…é˜²å¾¡åˆå§‹ä¸ºdï¼Œæ¯æ‰“ä¸€åªé˜²å¾¡+1ï¼Œé˜²å¾¡ &lt; aiçš„è¯ç›´æ¥å—åˆ°biçš„ä¼¤å®³ã€‚é—®æœ€ä¼˜æ‰“æ€ªé¡ºåºã€‚ï¼ˆæ²¡åšå‡ºæ¥ï¼Œç»™äº†ä¸ªn=1000çš„ç½‘ç»œæµåšæ³•ï¼Œé¢è¯•å®˜è¡¨ç¤ºnæ˜¯10wä¹Ÿèƒ½è´ªå¿ƒåš</li>
</ul>
<p>ç­–ç•¥ï¼š<br>
å¦‚æœæœ‰èƒ½ä¸åƒä¼¤å®³æ‰“çš„ï¼Œç›´æ¥æ‰“<br>
å¦‚æœæ²¡æœ‰èƒ½ä¸åƒä¼¤å®³æ‰“çš„ï¼Œç›´æ¥æ‰“ç ´é˜²æœ€å¼ºçš„</p>
<ul>
<li>äºŒå‰æ ‘åºåˆ—åŒ–å’Œååºåˆ—åŒ–+æ ¡éªŒ</li>
</ul>
<p>BFSï¼Œå±‚åºéå†é‡å»ºäºŒå‰æ ‘</p>
<ul>
<li>è¡Œåˆ—éƒ½æ˜¯æœ‰åºçš„äºŒç»´æ•°ç»„ï¼ŒæŸ¥æ‰¾kæ˜¯å¦å­˜åœ¨,æ—¶é—´å¤æ‚åº¦</li>
</ul>
<p>äºŒåˆ†æŸ¥æ‰¾ï¼šO(log2ï¼ˆmax(m,n)))</p>
<ul>
<li>æœ‰åºæ•°ç»„ï¼Œæœ‰2N+1ä¸ªæ•°ï¼Œå…¶ä¸­Nä¸ªæ•°æˆå¯¹å‡ºç°ï¼Œä»…1ä¸ªæ•°å•ç‹¬å‡ºç°ï¼Œæ‰¾å‡ºé‚£ä¸ªå•ç‹¬å‡ºç°çš„æ•°.,æ—¶é—´å¤æ‚åº¦</li>
</ul>
<p>O(log2ï¼ˆ2N))äºŒåˆ†æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾ä¸­é—´ä½ç½®çš„æ•°ç›¸ç­‰å€¼æ˜¯åœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Ÿå·¦è¾¹åˆ™å†å·¦å­æ•°ç»„ç»§ç»­æŸ¥æ‰¾ï¼Œå³è¾¹åˆ™åœ¨å³å­æ•°ç»„ç»§ç»­æŸ¥æ‰¾ã€‚</p>
<ul>
<li>100äº¿ä¸ªæ•°æ±‚top100,æ—¶é—´å¤æ‚åº¦</li>
</ul>
<p>åˆ†ç»„æŸ¥æ‰¾æˆ–bitmap</p>
<ul>
<li>100äº¿ä¸ªæ•°å’Œ100äº¿ä¸ªæ•°æ±‚äº¤é›†ï¼Œæ—¶é—´å¤æ‚åº¦</li>
</ul>
<p>å…¨æ’åˆ—é—®é¢˜ï¼Œè‡ªå·±æ‰¾å»</p>
<ul>
<li>hashç®—æ³•å®ç°(ç±»ä¼¼crc32æˆ–è€…murmur)ï¼Œä¿è¯éšæœºæ€§å’Œå‡åŒ€æ€§ï¼Œå‡å°‘å“ˆå¸Œå†²çª</li>
</ul>
<p>è€ƒçš„æ˜¯hashç®—æ³•çš„äº†è§£ï¼Œéœ€è¦çŸ¥é“ä¸€äº›ç»å…¸å“ˆå¸Œç®—æ³•å®ç°ã€‚</p>
<ul>
<li>åŠ¨è§„ 100ä¸ªçƒï¼Œä¸€æ¬¡åªèƒ½æ‹¿2-5ä¸ªï¼Œä½ å…ˆæ‹¿ï¼Œæˆ‘åæ‹¿ï¼Œæ€ä¹ˆä¿è¯ä½ èƒ½æ‹¿åˆ°æœ€åä¸€ä¸ªçƒ</li>
</ul>
<p>ä¸€æ¬¡2-5ï¼Œå»æ‰å…ˆæ‰‹ï¼Œæœ€åå›åˆå‰©ä½™7ä¸ªå³å¯ä¿è¯æ‹¿åˆ°æœ€åä¸€ä¸ªçƒã€‚å› æ­¤ï¼Œå…ˆæ‰‹æ‹¿2ä¸ªï¼Œæ¯ä¸€å›åˆä¿è¯æ‹¿æ‰çƒçš„æ€»æ•°ä¸º7ï¼Œå³å¯ã€‚ï¼ˆ100-2ï¼‰/7=14å›åˆã€‚</p>
<ul>
<li>æ­£æ•´æ•°æ•°ç»„ï¼Œæ±‚å’Œä¸ºsumçš„ç»„åˆ æ¢é›¶é’±ï¼Œ1,5,10å…ƒéƒ½å¾ˆå……è¶³ï¼Œç»™ä½ Nå…ƒå»æ¢é›¶é’±ï¼Œå¤šå°‘ç§æ¢æ³•</li>
</ul>
<p>ç®—æ³•é¢˜ç»™å®šä¸€ä¸ªæœ‰nä¸ªæ­£æ•´æ•°çš„æ•°ç»„Aå’Œä¸€ä¸ªæ•´æ•°sum,æ±‚é€‰æ‹©æ•°ç»„Aä¸­éƒ¨åˆ†æ•°å­—å’Œä¸ºsumçš„æ–¹æ¡ˆæ•°ï¼ŒåŠ¨æ€è§„åˆ’æ³•ã€‚</p>
<h1><a href="#tu-de-zui-duan-lu-jing" class="header-anchor">#</a><span id="tu-de-zui-duan-lu-jing">å›¾çš„æœ€çŸ­è·¯å¾„</span></h1>
<p>è¿ªæ°æ–¯ç‰¹æ‹‰ï¼ˆDijkstraï¼‰ç®—æ³•</p>
<p><a target="_blank" rel="noopener" href="https://www.cxyxiaowu.com/1172.html">https://www.cxyxiaowu.com/1172.html</a></p>
<h1><a href="#lian-biao-you-huan" class="header-anchor">#</a><span id="lian-biao-you-huan">é“¾è¡¨æœ‰ç¯</span></h1>
<p>ç»™å®šä¸€ä¸ªé“¾è¡¨å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæœ‰ç¯</p>
<p>å¿«æ…¢æŒ‡é’ˆç›¸é‡</p>
<h1><a href="#topk" class="header-anchor">#</a><span id="topk">TOPK</span></h1>
<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œè®©æ±‚ç¬¬Kå¤§çš„æ•°ï¼Œæˆ‘è¯´ç”¨ç»´æŠ¤æœ€å°å †ï¼Œä»¥åŠæœ€å°å †å¦‚ä½•ç»´æŠ¤çš„</p>
<h1><a href="#hui-wen-shu" class="header-anchor">#</a><span id="hui-wen-shu">å›æ–‡æ•°</span></h1>
<p>ç»™å®šä¸€ä¸ªæ•°å­—ï¼Œæ±‚æ˜¯å¦æ˜¯å›æ–‡æ•°ï¼Ÿ</p>
<h1><a href="#jie-yu-shui" class="header-anchor">#</a><span id="jie-yu-shui">æ¥é›¨æ°´</span></h1>
<h1><a href="#topk-100-wan-zhao-qian-100" class="header-anchor">#</a><span id="topk-100-wan-zhao-qian-100">topKï¼Œ100ä¸‡ï¼Œæ‰¾é’±100</span></h1>
<h1><a href="#qiu-di-k-da-de-shu" class="header-anchor">#</a><span id="qiu-di-k-da-de-shu">æ±‚ç¬¬Kå¤§çš„æ•°</span></h1>
<h1><a href="#gei-ding-liang-ge-wu-xu-ji-he-qiu-qi-zhong-yi-ge-ji-he-zhong-suo-you-yuan-su-yu-ling-yi-ge-ji-he-zhong-suo-you-yuan-su-chai-ju-de-jue-dui-zhi-de-zui-xiao-zhi-sort-er-fen" class="header-anchor">#</a><span id="gei-ding-liang-ge-wu-xu-ji-he-qiu-qi-zhong-yi-ge-ji-he-zhong-suo-you-yuan-su-yu-ling-yi-ge-ji-he-zhong-suo-you-yuan-su-chai-ju-de-jue-dui-zhi-de-zui-xiao-zhi-sort-er-fen">ç»™å®šä¸¤ä¸ªæ— åºé›†åˆï¼Œæ±‚å…¶ä¸­ä¸€ä¸ªé›†åˆä¸­æ‰€æœ‰å…ƒç´ ä¸å¦ä¸€ä¸ªé›†åˆä¸­æ‰€æœ‰å…ƒç´ å·®è·çš„ç»å¯¹å€¼çš„æœ€å°å€¼ï¼ˆsort+äºŒåˆ†ï¼‰</span></h1>
<h1><a href="#fan-zhuan-lian-biao" class="header-anchor">#</a><span id="fan-zhuan-lian-biao">åè½¬é“¾è¡¨</span></h1>
<h1><a href="#san-shu-zhi-he" class="header-anchor">#</a><span id="san-shu-zhi-he">ä¸‰æ•°ä¹‹å’Œ</span></h1>
<h1><a href="#lian-biao-qiu-he" class="header-anchor">#</a><span id="lian-biao-qiu-he">é“¾è¡¨æ±‚å’Œ</span></h1>
<h1><a href="#zui-xiao-fu-gai-zi-chuan" class="header-anchor">#</a><span id="zui-xiao-fu-gai-zi-chuan">æœ€å°è¦†ç›–å­ä¸²</span></h1>
<h1><a href="#zui-da-jiao-huan" class="header-anchor">#</a><span id="zui-da-jiao-huan">æœ€å¤§äº¤æ¢</span></h1>
<h1><a href="#ba-yi-ge-fang-cheng-shi-she-ji-cheng-shu" class="header-anchor">#</a><span id="ba-yi-ge-fang-cheng-shi-she-ji-cheng-shu">æŠŠä¸€ä¸ªæ–¹ç¨‹å¼è®¾è®¡æˆæ ‘</span></h1>
<h1><a href="#lru-huan-cun" class="header-anchor">#</a><span id="lru-huan-cun">LRUç¼“å­˜</span></h1>
<h1><a href="#cong-wu-xian-de-zi-fu-liu-zhong-sui-ji-xuan-chu-10-ge-zi-fu" class="header-anchor">#</a><span id="cong-wu-xian-de-zi-fu-liu-zhong-sui-ji-xuan-chu-10-ge-zi-fu">ä»æ— é™çš„å­—ç¬¦æµä¸­, éšæœºé€‰å‡º 10 ä¸ªå­—ç¬¦</span></h1>
<p>ç»ˆäºè¦è®²åˆ°è“„æ°´æ± é‡‡æ ·ç®—æ³•ï¼ˆReservoir Samplingï¼‰äº†ã€‚å…ˆè¯´ä¸€ä¸‹ç®—æ³•çš„è¿‡ç¨‹ï¼š</p>
<p>å‡è®¾æ•°æ®åºåˆ—çš„è§„æ¨¡ä¸º ğ‘›ï¼Œéœ€è¦é‡‡æ ·çš„æ•°é‡çš„ä¸º ğ‘˜ã€‚</p>
<p>é¦–å…ˆæ„å»ºä¸€ä¸ªå¯å®¹çº³ ğ‘˜ ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå°†åºåˆ—çš„å‰ ğ‘˜ ä¸ªå…ƒç´ æ”¾å…¥æ•°ç»„ä¸­ã€‚</p>
<p>ç„¶åä»ç¬¬ ğ‘˜+1 ä¸ªå…ƒç´ å¼€å§‹ï¼Œä»¥ $$\frac{k}{n} $$ çš„æ¦‚ç‡æ¥å†³å®šè¯¥å…ƒç´ æ˜¯å¦è¢«æ›¿æ¢åˆ°æ•°ç»„ä¸­ï¼ˆæ•°ç»„ä¸­çš„å…ƒç´ è¢«æ›¿æ¢çš„æ¦‚ç‡æ˜¯ç›¸åŒçš„ï¼‰ã€‚ å½“éå†å®Œæ‰€æœ‰å…ƒç´ ä¹‹åï¼Œæ•°ç»„ä¸­å‰©ä¸‹çš„å…ƒç´ å³ä¸ºæ‰€éœ€é‡‡å–çš„æ ·æœ¬ã€‚</p>
<h1><a href="#zui-duan-lu-jing" class="header-anchor">#</a><span id="zui-duan-lu-jing">æœ€çŸ­è·¯å¾„</span></h1>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html">https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html</a></p>
<p>Dijkstra</p>
<p>S, U</p>
<h1><a href="#shu-zi-zhuan-zhong-wen" class="header-anchor">#</a><span id="shu-zi-zhuan-zhong-wen">æ•°å­—è½¬ä¸­æ–‡</span></h1>
<p><a target="_blank" rel="noopener" href="https://github.com/Tnze/go.num/blob/master/zh/num.go">https://github.com/Tnze/go.num/blob/master/zh/num.go</a></p>
<p><a target="_blank" rel="noopener" href="http://data.biancheng.net/view/146.html">http://data.biancheng.net/view/146.html</a></p>
<h1><a href="#duo-xian-cheng" class="header-anchor">#</a><span id="duo-xian-cheng">å¤šçº¿ç¨‹</span></h1>
<h2><a href="#duo-xian-cheng-da-yin-abc" class="header-anchor">#</a><span id="duo-xian-cheng-da-yin-abc">å¤šçº¿ç¨‹æ‰“å°ABC</span></h2>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaoxi/p/8035725.html">https://www.cnblogs.com/xiaoxi/p/8035725.html</a></p>
<ul>
<li>JAVAé€šè¿‡ä¸€ä¸ªReentrantLockå’Œä¸‰ä¸ªconditonå®ç°</li>
<li>JAVAé€šè¿‡ä¸€ä¸ªé”å’Œä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å®ç°</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/838465fe2933">https://www.jianshu.com/p/838465fe2933</a></p>
<ul>
<li>GOé€šè¿‡channelç®¡çº¿ï¼ŒA-&gt;B-&gt;C</li>
</ul>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">package main

import (
	"fmt"
)

func main() &#123;
	N := 100
	chs := make([]chan bool, 0, N)
	for i := 0; i <= n; i++ &#123; chs="append(chs," make(chan bool)) &#125; for i :="1;" <="N;" go print(i, chs[i-1], chs[i]) chs[0] <- true select case <-chs[n]: func print(n int, i, o chan bool) <-i: fmt.println(n) &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></=></code></pre>
<ul>
<li>GOé€šè¿‡atmoic</li>
</ul>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">package main

import (
	"fmt"
	"sync"
	"sync/atomic"
)

func main() &#123;
	N := int64(100)
	a := int64(1)
	wg := &sync.WaitGroup&#123;&#125;

	for i := int64(1); i <= n; i++ &#123; wg.add(1) go func(i int64) for a !="i" time.sleep(time.microsecond) å‡å°‘ç«äº‰ &#125; fmt.println(i) atomic.addint64(&a, 1) wg.done() &#125;(i) wg.wait() &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></=></code></pre>
<ul>
<li>Goä¸ä¸€å®šæ‰“å°é¡ºåºè¦å’Œçº¿ç¨‹ä¸€è‡´ï¼Œå…ˆæ‹¿å…ˆå¾—</li>
</ul>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">package main

import (
	"fmt"
	"sync"
)

func main() &#123;
	N := 100
	a := 0
	l := sync.Mutex&#123;&#125;
	wg := &sync.WaitGroup&#123;&#125;

	for i := 1; i <= n; i++ &#123; wg.add(1) go func(i int) l.lock() defer l.unlock() a +="1" fmt.println(a) wg.done() &#125;(i) &#125; wg.wait() &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></=></code></pre>
<ul>
<li>C++é¡ºåºæ‰“å°</li>
</ul>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">#include<iostream>
#include<thread>
#include<mutex>

template<typename t, typename... ts>
std::unique_ptr<t> make_unique(Ts&&... params)
&#123;
    return std::unique_ptr<t>(new T(std::forward<ts>(params)...));
&#125;

class Solution &#123;
public:
    Solution(int count = 0) : count(count) &#123;&#125;

    void print(int i) &#123;
        std::unique_lock<std::mutex> l(m);
        count++;
        std::cout << count << std::endl;
    &#125;
private:
  std::mutex m;
  int count;
&#125;;

int main(int argc, char** argv) &#123;
    auto s(std::make_unique<solution>());
    int N = 3;
    for (int i = 0; i < N; ++i) &#123;
        std::thread t(&Solution::print, s.get(), i);
        t.join();
    &#125;
    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></solution></std::mutex></ts></t></t></typename></mutex></thread></iostream></code></pre>
<h2><a href="#lun-liu-da-yin" class="header-anchor">#</a><span id="lun-liu-da-yin">è½®æµæ‰“å°</span></h2>
<ul>
<li>C++</li>
</ul>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">#include<iostream>
#include<thread>
#include<mutex>
#include<vector>

const int N = 3;

class Solution &#123;
public:
    Solution(int count = 0) : count(count) &#123;&#125;

    void print(int num) &#123;

        for (int i = 0; i < repeat; i++) &#123;
            std::unique_lock<std::mutex> l(m);
            cvar.wait(l, [num, this] &#123; return num == count; &#125;);
            std::cout << num << std::endl;
            count += 1;
            count %= 3;
            l.unlock();
            cvar.notify_all();
        &#125;
    &#125;
private:
    std::mutex m;
    int count;
    std::condition_variable cvar;
    const int repeat = 3;
&#125;;

int main(int argc, char** argv) &#123;
    auto s(std::make_unique<solution>());
    std::vector<std::thread> threads;
    for (int i = 0; i < N; ++i) &#123;
        threads.emplace_back(&Solution::print, s.get(), i);
    &#125;

    std::for_each(threads.begin(), threads.end(), std::mem_fn(&std::thread::join));

    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></std::thread></solution></std::mutex></vector></mutex></thread></iostream></code></pre>
<h2><a href="#tong-ji-ci-pin" class="header-anchor">#</a><span id="tong-ji-ci-pin">ç»Ÿè®¡è¯é¢‘</span></h2>
<p>æ’åºæ•°ç»„ï¼Œç»Ÿè®¡è¯é¢‘</p>
<p>éæ’åºæ•°ç»„ç»Ÿè®¡è¯é¢‘</p>
<p>æ— é™é•¿æ•°ç»„ç»Ÿè®¡è¯é¢‘</p>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">package main

import (
	"fmt"
	"runtime"
	"sync"
)

func main() &#123;
	a := []int&#123;1, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13&#125;
	size := 3
	N := 3
	inter := make(chan map[int]int, 10)

	wg := &sync.WaitGroup&#123;&#125;
	for i := 0; i < len(a); i += size &#123;
		wg.Add(1)
		l := i
		r := i + size
		if r > len(a) &#123;
			r = len(a)
		&#125;
		go count(a, l, r, inter, wg)
	&#125;

	wg.Wait()

	for i := 0; i < N; i++ &#123;
		wg.Add(1)
		go reduce(inter, wg)
	&#125;

	wg.Wait()

	out := <-inter if len(inter)> 0 &#123;
		for m := range inter &#123;
			fmt.Println(m)
			fmt.Println("go:", runtime.NumGoroutine())
			for k, v := range m &#123;
				fmt.Println(k)
				out[k] = v
			&#125;
			if len(inter) == 0 &#123;
				close(inter)
			&#125;
		&#125;
	&#125;

	fmt.Println(out)
&#125;

func count(a []int, l, r int, o chan map[int]int, wg *sync.WaitGroup) &#123;
	m := make(map[int]int)
	for i := l; i < r; i++ &#123;
		m[a[i]]++
	&#125;
	o <- 0 m wg.done() &#125; func reduce(i chan map[int]int, wg *sync.waitgroup) &#123; for if len(i) <="1" return select case map1 :="<-i:" len(map1)="=" continue map2 len(map2)="=" i <- k, v map1[k]="v" &#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></-></-inter></code></pre>
<h2><a href="#sheng-chan-zhe-xiao-fei-zhe" class="header-anchor">#</a><span id="sheng-chan-zhe-xiao-fei-zhe">ç”Ÿäº§è€…æ¶ˆè´¹è€…</span></h2>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">#include <iostream>
#include <thread>
#include <mutex>
#include <queue>
#include <memory>

const int N = 100;

class Channel
&#123;
public:
    Channel(int count = 0) : count(count) &#123;&#125;

    void produce(int i)
    &#123;
        std::unique_lock<std::mutex> l(m);
        pvar.wait(l, [this]
                  &#123; return q.size() < count; &#125;);
        std::cout << " <- " << i std::endl; q.push(i); cvar.notify_all(); &#125; void consume() &#123; std::unique_lock<std::mutex> l(m);
        cvar.wait(l, [this]
                  &#123; return q.size() != 0; &#125;);
        std::cout << q.front() << " <- " << std::endl; q.pop(); pvar.notify_all(); &#125; int size() &#123; return q.size(); private: std::mutex m; count; std::condition_variable pvar, cvar; std::queue<int> q;
&#125;;

int main(int argc, char **argv)
&#123;
    auto s(std::make_unique<channel>(10));
    std::vector<std::thread> threads;
    for (int i = 0; i < N; ++i)
    &#123;
        threads.emplace_back(&Channel::produce, s.get(), i);
        threads.emplace_back(&Channel::consume, s.get());
    &#125;

    std::for_each(threads.begin(), threads.end(), std::mem_fn(&std::thread::join));

    return 0;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></std::thread></channel></-></-></std::mutex></memory></queue></mutex></thread></iostream></code></pre>
<h2><a href="#du-zhe-xie-zhe" class="header-anchor">#</a><span id="du-zhe-xie-zhe">è¯»è€…å†™è€…</span></h2>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">
#include <iostream>
//std::unique_lock
#include <mutex> 
#include <shared_mutex>
#include <thread>
 
class ThreadSafeCounter &#123;
public:
	ThreadSafeCounter() = default;
 
	// å¤šä¸ªçº¿ç¨‹/è¯»è€…èƒ½åŒæ—¶è¯»è®¡æ•°å™¨çš„å€¼ã€‚
	unsigned int get() const &#123;
		std::shared_lock<std::shared_mutex> lock(mutex_);
		return value_;
	&#125;
 
	// åªæœ‰ä¸€ä¸ªçº¿ç¨‹/å†™è€…èƒ½å¢åŠ /å†™çº¿ç¨‹çš„å€¼ã€‚
	void increment() &#123;
		std::unique_lock<std::shared_mutex> lock(mutex_);
		value_++;
	&#125;
 
	// åªæœ‰ä¸€ä¸ªçº¿ç¨‹/å†™è€…èƒ½é‡ç½®/å†™çº¿ç¨‹çš„å€¼ã€‚
	void reset() &#123;
		std::unique_lock<std::shared_mutex> lock(mutex_);
		value_ = 0;
	&#125;
 
private:
	mutable std::shared_mutex mutex_;
	unsigned int value_ = 0;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></std::shared_mutex></std::shared_mutex></std::shared_mutex></thread></shared_mutex></mutex></iostream></code></pre>
<h2><a href="#ji-suan-jie-cheng" class="header-anchor">#</a><span id="ji-suan-jie-cheng">è®¡ç®—é˜¶ä¹˜</span></h2>
<h2><a href="#ji-suan-n-ci-fang" class="header-anchor">#</a><span id="ji-suan-n-ci-fang">è®¡ç®—Næ¬¡æ–¹</span></h2>
<pre class="line-numbers language-highlight plaintext"><code class="language-highlight plaintext">func pow(x, n int) int &#123;
    ret := 1 // ç»“æœåˆå§‹ä¸º0æ¬¡æ–¹çš„å€¼ï¼Œæ•´æ•°0æ¬¡æ–¹ä¸º1ã€‚å¦‚æœæ˜¯çŸ©é˜µï¼Œåˆ™ä¸ºå•å…ƒçŸ©é˜µã€‚
    for n != 0 &#123;
        if n%2 != 0 &#123;
            ret = ret * x
        &#125;
        n /= 2
        x = x * x
    &#125;
    return ret
&#125;

func main() &#123;
    x := pow(2, 10) // 2^10
    println(x)      // 1024
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1><a href="#pai-xu-shu-zu-qu-chong-huan-shi-ha-xi-biao-qu-chong" class="header-anchor">#</a><span id="pai-xu-shu-zu-qu-chong-huan-shi-ha-xi-biao-qu-chong">æ’åºæ•°ç»„å»é‡ï¼Œè¿˜æ˜¯å“ˆå¸Œè¡¨å»é‡</span></h1>
<p>å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ’åºæ•°ç»„å¯ä»¥åˆ†æ®µå¹¶è¡Œï¼Œå“ˆå¸Œè¡¨ä¼šå†²çª</p>
<p>å•çº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ•°ç»„cacheç©ºé—´å±€éƒ¨æ€§æ›´å¥½</p>
</p></div><div class="share"><span>Share</span>&nbsp;<span class="soc"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></span><span class="soc"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></span><span class="soc"><a target="_blank" rel="noopener" href="http://twitter.com/home?status=https://blog.kleon.space/work/interview/algo/%20KLEON%20çƒ¤é¢ç­‹ - ç®—æ³•" class="fa fa-twitter"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/cs/algo/greedy/" title="ç®—æ³•åŸºç¡€ - è´ªå¿ƒæ³•"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: ç®—æ³•åŸºç¡€ - è´ªå¿ƒæ³•</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/work/interview/general/" title="çƒ¤é¢ç­‹ - é€šç”¨">Next post: çƒ¤é¢ç­‹ - é€šç”¨&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2022&nbsp;<a target="_blank" href="https://blog.kleon.space" rel="noopener noreferrer">Kleon</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>